(()=>{var e={};e.id=3,e.ids=[3],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},99846:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>p,tree:()=>c}),t(84305),t(79870),t(35866);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,84305)),"D:\\Apps\\Repositories\\personal\\thefortress\\app\\admin\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,79870)),"D:\\Apps\\Repositories\\personal\\thefortress\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],x=["D:\\Apps\\Repositories\\personal\\thefortress\\app\\admin\\page.js"],o="/admin/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94521:(e,s,t)=>{Promise.resolve().then(t.bind(t,27072))},27072:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(10326),a=t(17577),i=t(77109),l=t(35047);let n=()=>{let{data:e,status:s}=(0,i.useSession)(),t=(0,l.useRouter)(),[n,d]=(0,a.useState)("overview"),[c,x]=(0,a.useState)({users:0,galleryImages:0,stories:0}),[o,m]=(0,a.useState)(!0);(0,a.useEffect)(()=>{"loading"!==s&&(e&&e.user.isAdmin?p():t.push("/"))},[e,s,t]);let p=async()=>{try{let[e,s,t]=await Promise.all([fetch("/api/admin/stats/users"),fetch("/api/admin/stats/gallery"),fetch("/api/admin/stats/stories")]),r=await e.json(),a=await s.json(),i=await t.json();x({users:r.count,galleryImages:a.count,stories:i.count})}catch(e){console.error("Failed to fetch stats:",e)}finally{m(!1)}};return"loading"===s?r.jsx("div",{className:"min-h-screen bg-secondary flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin dashboard..."})]})}):e&&e.user.isAdmin?(0,r.jsxs)("div",{className:"min-h-screen bg-secondary",children:[r.jsx("header",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 md:mb-0",children:"Admin Dashboard"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",e?.user?.name]}),r.jsx("button",{onClick:()=>t.push("/"),className:"btn-secondary text-gray-900",children:"Back to Site"})]})]})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"card p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold",children:o?"...":c.users})]})]})}),r.jsx("div",{className:"card p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-green-100 text-green-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l4.586-4.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Gallery Images"}),r.jsx("p",{className:"text-2xl font-bold",children:o?"...":c.galleryImages})]})]})}),r.jsx("div",{className:"card p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Stories"}),r.jsx("p",{className:"text-2xl font-bold",children:o?"...":c.stories})]})]})})]}),r.jsx("div",{className:"mb-6 border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[r.jsx("button",{onClick:()=>d("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${"overview"===n?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),r.jsx("button",{onClick:()=>d("users"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${"users"===n?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Users"}),r.jsx("button",{onClick:()=>d("gallery"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${"gallery"===n?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Gallery"}),r.jsx("button",{onClick:()=>d("stories"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${"stories"===n?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Stories"})]})}),(0,r.jsxs)("div",{className:"card p-6",children:["overview"===n&&(0,r.jsxs)("div",{className:"fade-in",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Dashboard Overview"}),r.jsx("p",{className:"text-gray-600",children:"Welcome to the admin dashboard. Here you can manage users, gallery images, and stories."}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Actions"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx("button",{className:"text-primary hover:underline",children:"Add New User"})}),r.jsx("li",{children:r.jsx("button",{className:"text-primary hover:underline",children:"Upload Gallery Image"})}),r.jsx("li",{children:r.jsx("button",{className:"text-primary hover:underline",children:"Create New Story"})})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Recent Activity"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{className:"text-gray-600",children:"New user registered: John Doe"}),r.jsx("li",{className:"text-gray-600",children:"Gallery image uploaded: Community Event"}),r.jsx("li",{className:"text-gray-600",children:"Story published: Education Impact"})]})]})]})]}),"users"===n&&(0,r.jsxs)("div",{className:"fade-in",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"User Management"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Manage user accounts and permissions."}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Admin User"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:"admin@example.com"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Admin"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("button",{className:"text-primary hover:underline",children:"Edit"})})]}),(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Regular User"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:"user@example.com"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"User"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("button",{className:"text-primary hover:underline",children:"Edit"})})]})]})]})}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{className:"btn-primary",children:"Add New User"})})]}),"gallery"===n&&(0,r.jsxs)("div",{className:"fade-in",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Gallery Management"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Manage gallery images uploaded by users."}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(e=>(0,r.jsxs)("div",{className:"card overflow-hidden",children:[r.jsx("div",{className:"bg-secondary border-2 border-dashed w-full h-48 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500",children:"Gallery Image"})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-900",children:["Image Title ",e]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Uploaded by User ",e]}),(0,r.jsxs)("div",{className:"mt-2 flex space-x-2",children:[r.jsx("button",{className:"text-primary text-sm hover:underline",children:"Edit"}),r.jsx("button",{className:"text-red-600 text-sm hover:underline",children:"Delete"})]})]})]},e))}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{className:"btn-primary",children:"View All Gallery Images"})})]}),"stories"===n&&(0,r.jsxs)("div",{className:"fade-in",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Story Management"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Manage stories and testimonials submitted by users."}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Author"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Community Impact Story"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:"John Smith"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:"2023-06-15"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[r.jsx("button",{className:"text-primary hover:underline mr-2",children:"Edit"}),r.jsx("button",{className:"text-red-600 hover:underline",children:"Delete"})]})]}),(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Education Success"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:"Sarah Johnson"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:"2023-06-10"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[r.jsx("button",{className:"text-primary hover:underline mr-2",children:"Edit"}),r.jsx("button",{className:"text-red-600 hover:underline",children:"Delete"})]})]})]})]})}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{className:"btn-primary",children:"View All Stories"})})]})]})]})]}):null}},84305:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>n});var r=t(68570);let a=(0,r.createProxy)(String.raw`D:\Apps\Repositories\personal\thefortress\app\admin\page.js`),{__esModule:i,$$typeof:l}=a;a.default;let n=(0,r.createProxy)(String.raw`D:\Apps\Repositories\personal\thefortress\app\admin\page.js#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,23,790,316,554],()=>t(99846));module.exports=r})();