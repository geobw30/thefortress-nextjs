"use strict";(()=>{var e={};e.id=569,e.ids=[569],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},7843:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>y,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{POST:()=>c});var n=t(49303),i=t(88716),a=t(60670),o=t(11185),p=t.n(o),u=t(42023),d=t.n(u),l=t(83077);async function c(e){try{await p().connect(process.env.MONGODB_URI);let{name:r,email:t,password:s}=await e.json();if(!r||!t||!s)return new Response(JSON.stringify({error:"Missing required fields"}),{status:400,headers:{"Content-Type":"application/json"}});if(await l.Z.findOne({email:t}))return new Response(JSON.stringify({error:"User already exists"}),{status:409,headers:{"Content-Type":"application/json"}});let n=await d().hash(s,12),i=new l.Z({name:r,email:t,password:n,isAdmin:!1});return await i.save(),new Response(JSON.stringify({message:"User created successfully"}),{status:201,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Registration error:",e),new Response(JSON.stringify({error:"Internal server error"}),{status:500,headers:{"Content-Type":"application/json"}})}}let g=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/register/route",pathname:"/api/register",filename:"route",bundlePath:"app/api/register/route"},resolvedPagePath:"D:\\Apps\\Repositories\\personal\\thefortress\\app\\api\\register\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:y}=g,f="/api/register/route";function w(){return(0,a.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:h})}},83077:(e,r,t)=>{t.d(r,{Z:()=>a});var s=t(11185),n=t.n(s);let i=new(n()).Schema({name:String,email:{type:String,unique:!0},password:String,isAdmin:{type:Boolean,default:!1}},{timestamps:!0}),a=n().models.User||n().model("User",i)},49303:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,23],()=>t(7843));module.exports=s})();