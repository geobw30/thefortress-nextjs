(()=>{var e={};e.id=928,e.ids=[928],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},6744:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(24474),s(79870),s(35866);var r=s(23191),a=s(88716),l=s(37922),i=s.n(l),o=s(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let c=["",{children:["gallery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,24474)),"D:\\Apps\\Repositories\\personal\\thefortress\\app\\gallery\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,79870)),"D:\\Apps\\Repositories\\personal\\thefortress\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Apps\\Repositories\\personal\\thefortress\\app\\gallery\\page.js"],p="/gallery/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/gallery/page",pathname:"/gallery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},28885:(e,t,s)=>{Promise.resolve().then(s.bind(s,42139))},42139:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(10326),a=s(17577),l=s(77109);let i=()=>{let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[o,n]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[p,u]=(0,a.useState)(""),[x,m]=(0,a.useState)(""),[h,g]=(0,a.useState)(null),[y,f]=(0,a.useState)(!1),{data:b,status:j}=(0,l.useSession)(),[v,N]=(0,a.useState)(!1),[w,q]=(0,a.useState)(null),[k,P]=(0,a.useState)(0);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/gallery"),s=await e.json();e.ok?t(s.images):n(s.error||"Failed to fetch images")}catch(e){n("Failed to fetch images"),console.error("Fetch error:",e)}finally{i(!1)}})()},[]);let _=async s=>{s.preventDefault(),f(!0),n("");try{let s=new FormData;s.append("title",p),s.append("description",x),s.append("image",h);let r=await fetch("/api/gallery/upload",{method:"POST",body:s}),a=await r.json();r.ok?(t([a.image,...e]),u(""),m(""),g(null),d(!1)):n(a.error||"Upload failed")}catch(e){n("Upload failed"),console.error("Upload error:",e)}finally{f(!1)}},S=(e,t)=>{q(e),P(t),N(!0),document.body.style.overflow="hidden"},C=()=>{N(!1),q(null),P(0),document.body.style.overflow="auto"},U=()=>{let t=0===k?e.length-1:k-1;P(t),q(e[t])},A=()=>{let t=k===e.length-1?0:k+1;P(t),q(e[t])};return((0,a.useEffect)(()=>{let e=e=>{v&&("Escape"===e.key?C():"ArrowLeft"===e.key?U():"ArrowRight"===e.key&&A())};return v&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[v,k,e]),s)?r.jsx("div",{className:"py-16 px-4 bg-white min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading gallery..."})]})}):r.jsx("div",{className:"py-16 px-4 bg-white",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto w-full",children:[(0,r.jsxs)("div",{className:"text-center mb-12 fade-in",children:[r.jsx("h1",{className:"section-title",children:"Our Gallery"}),r.jsx("div",{className:"w-20 h-1 bg-primary mx-auto"}),r.jsx("p",{className:"section-subtitle",children:"Explore images from our work in communities we serve."}),"authenticated"===j&&r.jsx("div",{className:"mt-8",children:r.jsx("button",{onClick:()=>d(!c),className:"btn-primary",children:c?"Cancel Upload":"Upload Image"})})]}),c&&(0,r.jsxs)("div",{className:"bg-secondary rounded-lg p-6 mb-12 fade-in",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Upload New Image"}),o&&r.jsx("div",{className:"mb-4 alert-error",children:r.jsx("span",{className:"block sm:inline",children:o})}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"form-label",children:"Title"}),r.jsx("input",{type:"text",value:p,onChange:e=>u(e.target.value),className:"form-input w-full",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"form-label",children:"Description"}),r.jsx("textarea",{value:x,onChange:e=>m(e.target.value),rows:"3",className:"form-input w-full"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"form-label",children:"Image"}),r.jsx("input",{type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&g(e.target.files[0])},accept:"image/*",className:"form-input w-full",required:!0})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:y?"Uploading...":"Upload"})]})]})]}),o&&!c&&r.jsx("div",{className:"mb-4 alert-error",children:r.jsx("span",{className:"block sm:inline",children:o})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-lg shadow-md hover:shadow-lg transition duration-300 cursor-pointer",onClick:()=>S(e,t),children:[r.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-64 object-cover",onError:e=>{e.target.onerror=null,e.target.src="/images/placeholder.jpg"}}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-white text-center opacity-0 group-hover:opacity-100 transition duration-300 p-4",children:[r.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),r.jsx("p",{className:"text-sm",children:e.description}),(0,r.jsxs)("p",{className:"text-xs mt-2 text-gray-300",children:["Uploaded by ",e.uploadedBy?.name]})]})})]},e._id))}),v&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:C,children:(0,r.jsxs)("div",{className:"relative max-w-6xl max-h-[90vh] w-full h-full flex items-center justify-center",onClick:e=>e.stopPropagation(),children:[r.jsx("button",{className:"absolute top-4 right-4 text-white text-4xl z-10",onClick:C,children:"\xd7"}),r.jsx("button",{className:"absolute left-4 text-white text-5xl z-10",onClick:U,children:"‹"}),r.jsx("button",{className:"absolute right-4 text-white text-5xl z-10",onClick:A,children:"›"}),r.jsx("div",{className:"max-w-full max-h-full flex items-center justify-center",children:r.jsx("img",{src:w?.imageUrl,alt:w?.title,className:"max-w-full max-h-full object-contain"})}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white p-4 text-center",children:[r.jsx("h3",{className:"text-xl font-semibold",children:w?.title}),r.jsx("p",{className:"text-gray-300",children:w?.description}),(0,r.jsxs)("p",{className:"text-xs mt-1 text-gray-400",children:["Uploaded by ",w?.uploadedBy?.name," | Image ",k+1," of ",e.length]})]})]})}),0===e.length&&!s&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-600",children:"No images found in the gallery."})})]})})}},24474:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var r=s(68570);let a=(0,r.createProxy)(String.raw`D:\Apps\Repositories\personal\thefortress\app\gallery\page.js`),{__esModule:l,$$typeof:i}=a;a.default;let o=(0,r.createProxy)(String.raw`D:\Apps\Repositories\personal\thefortress\app\gallery\page.js#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,23,790,316,554],()=>s(6744));module.exports=r})();